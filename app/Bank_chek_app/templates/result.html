{% load static %}

{% load static %}

<!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="utf-8" />
        <title>Check Verification</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Premium Bootstrap 4 Landing Page Template" />
        <meta name="keywords" content="Saas, Software, multi-uses, HTML, Clean, Modern" />
        <meta name="author" content="Shreethemes" />
        <meta name="email" content="shreethemes@gmail.com" />
        <meta name="website" content="http://www.shreethemes.in" />
        <meta name="Version" content="v2.5.1" />
        <!-- favicon -->
        <link rel="shortcut icon" href="{% static 'images/logo1.png' %}">
        <!-- Bootstrap -->
        <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- Icons -->
        <link href="{% static 'css/materialdesignicons.min.css' %}" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.9/css/unicons.css">
        <!-- Slider -->
        <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}"/>
        <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}"/>
        <!-- Main Css -->
        <link href="{% static 'css/style.css' %}" rel="stylesheet" type="text/css" id="theme-opt" />
        <link href="{% static 'css/colors/default.css' %}" rel="stylesheet" id="color-opt">

        <style>
            .swal2-modal {
                border-radius: 30px !important;
            }
        </style>
    </head>

    <body>

        <!-- Navbar STart -->
        <header id="topnav" class="defaultscroll sticky">
            <div class="container">
                <!-- Logo container-->
                <div>
                    <a class="logo" href="{% url 'home' %}">
                        <img src="{% static 'images/logo1.png' %}" class="l-dark" height="45" alt="">
                        <img src="{% static 'images/logo1.png' %}" class="l-light" height="45" alt="">
                    </a>
                </div>
                <div class="buy-button">
                    <span onclick="document.getElementById('cheque_image').click()" class="btn btn-primary login-btn-primary btn-block px-2" style="width: 150px">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16px" height="16px" fill="currentColor">
                            <path d="M19,4H5A3,3,0,0,0,2,7V17a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4ZM5,18a1,1,0,0,1-1-1V14.58l3.3-3.29a1,1,0,0,1,1.4,0L15.41,18Zm15-1a1,1,0,0,1-1,1h-.77l-3.81-3.83.88-.88a1,1,0,0,1,1.4,0L20,16.58Zm0-3.24-1.88-1.87a3.06,3.06,0,0,0-4.24,0l-.88.88L10.12,9.89a3.06,3.06,0,0,0-4.24,0L4,11.76V7A1,1,0,0,1,5,6H19a1,1,0,0,1,1,1Z"></path>
                        </svg>
                        Check Image
                    </span>
                    <span onclick="document.getElementById('cheque_image').click()" class="btn btn-light login-btn-light btn-block px-2" style="width: 150px">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16px" height="16px" fill="currentColor">
                                <path d="M19,4H5A3,3,0,0,0,2,7V17a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4ZM5,18a1,1,0,0,1-1-1V14.58l3.3-3.29a1,1,0,0,1,1.4,0L15.41,18Zm15-1a1,1,0,0,1-1,1h-.77l-3.81-3.83.88-.88a1,1,0,0,1,1.4,0L20,16.58Zm0-3.24-1.88-1.87a3.06,3.06,0,0,0-4.24,0l-.88.88L10.12,9.89a3.06,3.06,0,0,0-4.24,0L4,11.76V7A1,1,0,0,1,5,6H19a1,1,0,0,1,1,1Z"></path>
                            </svg>
                            Check Image
                        </span>
                    <div class="position-relative l-light login-btn-light mt-2">
                        <div class="note" data-tooltip="Admin Page">
                            <a href="/admin" class="btn btn-icon btn-light mt-2"><i data-feather="shield" class="fea icon-sm icons"></i></a>
                        </div>
                    </div>

                    <div class="position-relative l-dark login-btn-primary mt-2">
                        <div class="note" data-tooltip="Admin Page">
                            <a href="/admin" class="btn btn-icon btn-danger mt-2"><i data-feather="shield" class="fea icon-sm icons"></i></a>
                        </div>
                    </div>

                </div>

                <div class="menu-extras">
                    <div class="menu-item">
                        <!-- Mobile menu toggle-->
                        <a class="navbar-toggle">
                            <div class="lines">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </a>
                        <!-- End mobile menu toggle-->
                    </div>
                </div>
            </div>
        </header>



        <!-- Hero Start -->
        <section class="bg-half-170 bg-soft-primary d-table w-100" style="padding-top: 90px;">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="title-heading text-center mt-4">
                            <h1 class="badge badge-outline-primary p-3 rounded-md" style="font-size: 100%;">Original Check</h1>
                            <img src="{% get_media_prefix %}{{ cheque.image_original }}">
                            <h1 class="mt-4 badge badge-outline-primary p-3 rounded-md" style="font-size: 100%;">Check after preprocessing</h1>
                            <img src="{% get_media_prefix %}{{ cheque.image_preprocessing }}">
                            <h1 class="mt-4 badge badge-outline-primary p-3 rounded-md" style="font-size: 100%;">Check after object detection model (YoloV5)</h1>
                            <img src="{% get_media_prefix %}{{ cheque.image_with_bounding_boxes }}">
                            <div class="row d-flex justify-content-center align-items-center">


                                <div class="col-4 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-25" style="font-size: 100%;">Account Number</h1>
                                    {% if cheque.image_account_number %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_account_number }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                        <h6>{{ ocr_data.id }}</h6>
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>

                                <div class="col-4 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-25" style="font-size: 100%;">Receiver Name</h1>
                                    {% if cheque.image_ReceiverName %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_ReceiverName }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                        <h6>{{ ocr_data.nom }}</h6>
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>

                                <div class="col-4 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-25" style="font-size: 100%;">Cheque Number</h1>
                                    {% if cheque.image_cheque_number %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_cheque_number }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                        <h6>{{ ocr_data.cheque_number }}</h6>
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>


                                <div class="col-4 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-25" style="font-size: 100%;">Date</h1>
                                    {% if cheque.image_DateIss %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_DateIss }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                        <h6>{{ ocr_data.date }}</h6>
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>

                                <div class="col-4 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-25" style="font-size: 100%;">Signature</h1>
                                    {% if cheque.image_signature %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_signature }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>


                                <div class="col-4 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-50" style="font-size: 100%;">Montant en chiffre</h1>
                                    {% if cheque.image_amount_digits %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_amount_digits }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                        <h6>{{ ocr_data.montant_chiffre }}</h6>
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>

                                <div class="col-8 mt-4">
                                    <h1 class="badge badge-outline-primary rounded-md mx-auto d-block w-25" style="font-size: 100%;">Montant en lettre</h1>
                                    {% if cheque.image_amout_letter %}
                                        <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_amout_letter }}">
                                        <img width="25px" src="{% static 'accept.png' %}">
                                        <h6>{{ ocr_data.montant_lettre }}</h6>
                                    {% else %}
                                        <img width="100px" height="100px" src="{% static 'forbidden.png' %}">
                                    {% endif %}
                                </div>


                                <div class="col-12 mt-4">
                                    <button onclick="verifyFields()" id="validate_fields" class="btn btn-primary">Validate fields</button>
                                </div>
                            </div>

                            <div class="row justify-content-center align-items-center mt-5 d-none" id="signature_verification">


                                <div class="col-3 mt-4">
                                    <h1 class="badge badge-outline-muted rounded-md mx-auto" style="font-size: 100%;">Check Signature</h1>
                                    <img class="rounded" src="{% get_media_prefix %}{{ cheque.image_signature }}">
                                </div>

                                <div class="col-1 mt-5 p-0">
                                    <img src="{% static 'compare.png' %}" style="width: 100%">
                                    <button onclick="validateSignature()" id="validate_fields" class="btn btn-primary">Validate Signature</button>
                                </div>

                                <div class="col-3 mt-4">
                                    <h1 class="badge badge-outline-success rounded-md mx-auto" style="font-size: 100%;">Signature from dataset</h1>
                                    <img class="rounded" src="{% get_media_prefix %}dataset/{{ ocr_data.final_id }}.jpg" width="80%">
                                </div>

                            </div>



                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Hero End -->


        <!-- Shape Start -->
        <div class="position-relative">
            <div class="shape overflow-hidden text-footer">
                <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 48H1437.5H2880V0H2160C1442.5 52 720 0 720 0H0V48Z" fill="currentColor"></path>
                </svg>
            </div>
        </div>

        <footer class="footer footer-bar">
            <div class="container text-center">
                <div class="row align-items-center">
                    <div class="col-sm-6">
                        <div class="text-sm-left">
                            <img src="{% static 'images/logo1.png' %}" height="24" alt="">
                            <span class="mb-0">© 2022-23</span>
                        </div>
                    </div>
                </div>
            </div><!--end container-->
        </footer><!--end footer-->
        <!-- Footer End -->

        <!-- Back to top -->
        <a href="#" class="btn btn-icon btn-soft-primary back-to-top"><i data-feather="arrow-up" class="icons"></i></a>
        <!-- Back to top -->

        <!-- javascript -->
        <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
        <script src="{% static 'js/jquery.easing.min.js' %}"></script>
        <script src="{% static 'js/scrollspy.min.js' %}"></script>
        <!-- SLIDER -->
        <script src="{% static 'js/owl.carousel.min.js' %}"></script>
        <script src="{% static 'js/owl.init.js' %}"></script>
        <!-- Icons -->
        <script src="{% static 'js/feather.min.js' %}"></script>
        <script src="https://unicons.iconscout.com/release/v2.1.9/script/monochrome/bundle.js' %}"></script>
        <!-- Main Js -->
        <script src="{% static 'js/app.js' %}"></script>

        <script src="{% static 'js/sweetalert2.all.min.js' %}"></script>

        <script>
            let validate_fields_button = document.getElementById("validate_fields")
            let signature_verification_element = document.getElementById("signature_verification")

            function alert_message(msg,icon){
                Swal.fire({
                      icon: icon,
                      title: msg,
                      showConfirmButton: false,
                      timer: 4000,
                      timerProgressBar: true,
                      showClass: {
                        popup: 'animate__animated animate__fadeInDown'
                      },
                      hideClass: {
                        popup: 'animate__animated animate__fadeOutUp'
                      }
                });
            }

            function verifyFields() {
                let erreur = {{ error }};

                if ( erreur === 1 ) {
                    alert_message('There are missing fields', 'error');
                }
                else {
                    alert_message('All the fields are checked', 'success');
                    validate_fields_button.classList.remove("btn-primary");
                    validate_fields_button.classList.add("btn-success");
                    validate_fields_button.style.cursor = "not-allowed";

                    signature_verification_element.classList.remove("d-none");
                    signature_verification_element.classList.add("d-flex");
                }
            }

            function validateSignature() {
                let result = {{ result }};
                if ( result === 1 ) {
                    alert_message('This check is valid', 'success');
                }
                else {
                    alert_message('This check is forged', 'error');
                }
            }
        </script>

    </body>
</html>
